{"version":3,"sources":["../../../../work/magiccube/js/Vertex.js"],"names":["Vertex","x","y","z","parseFloat","toString","center","theta","phi","M","ct","Math","cos","st","sin","cp","sp","rotatecenter","origin","a","b","c","a2","pow","b2","c2","unitlen2","unitlen","sqrt"],"mappings":"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","file":"Vertex.js","sourcesContent":["export class Vertex {\r\n    constructor(x = '0', y = '0', z = '0') {\r\n        this.x = parseFloat(x);\r\n        this.y = parseFloat(y);\r\n        this.z = parseFloat(z);\r\n    }\r\n\r\n    getId() {\r\n        return this.x.toString() + \" \" + this.y.toString() + \" \" + this.z.toString();\r\n    }\r\n\r\n    /**\r\n     * 绕center旋转\r\n     * @param center 点\r\n     * @param theta 绕X轴的角度\r\n     * @param phi 绕Z轴的角度\r\n     */\r\n    rotate(center, theta, phi) {\r\n        var M = this;\r\n        // 旋转角的正余弦值\r\n        var ct = Math.cos(theta);\r\n        var st = Math.sin(theta);\r\n        var cp = Math.cos(phi);\r\n        var sp = Math.sin(phi);\r\n\r\n        // 旋转后的值\r\n        var x = M.x - center.x;\r\n        var y = M.y - center.y;\r\n        var z = M.z - center.z;\r\n        M.x = ct * x - st * cp * y + st * sp * z + center.x;\r\n        M.y = st * x + ct * cp * y - ct * sp * z + center.y;\r\n        M.z = sp * y + cp * z + center.z;\r\n    }\r\n\r\n    rotateVector(rotatecenter, theta) {\r\n        var origin = new Vertex(0, 0, 0);\r\n        var M = this;\r\n        var a = rotatecenter.x;\r\n        var b = rotatecenter.y;\r\n        var c = rotatecenter.z;\r\n        var a2 = Math.pow(a, 2);\r\n        var b2 = Math.pow(b, 2);\r\n        var c2 = Math.pow(c, 2);\r\n        var unitlen2 = a2 + b2 + c2;\r\n        var unitlen = Math.sqrt(a2 + b2 + c2);\r\n        // 旋转角的正余弦值\r\n        var ct = Math.cos(theta);\r\n        var st = Math.sin(theta);\r\n\r\n        // 旋转后的值\r\n        var x = M.x - origin.x;\r\n        var y = M.y - origin.y;\r\n        var z = M.z - origin.z;\r\n\r\n        M.x = (a2 + (b2 + c2) * ct) / unitlen2 * x\r\n            + (a * b * (1 - ct) - c * unitlen * st) / unitlen2 * y\r\n            + (a * c * (1 - ct) + b * unitlen * st) / unitlen2 * z + origin.x;\r\n        M.y = (a * b * (1 - ct) + c * unitlen * st) / unitlen2 * x\r\n            + (b2 + (a2 + c2) * ct) / unitlen2 * y\r\n            + (b * c * (1 - ct) - a * unitlen * st) / unitlen2 * z + origin.y;\r\n        M.z = (a * c * (1 - ct) - b * unitlen * st) / unitlen2 * x\r\n            + (b * c * (1 - ct) + a * unitlen * st) / unitlen2 * y\r\n            + (c2 + (a2 + b2) * ct) / unitlen2 * z + origin.z;\r\n    }\r\n\r\n}"]}