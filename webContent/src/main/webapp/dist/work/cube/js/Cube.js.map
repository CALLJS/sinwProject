{"version":3,"sources":["../../../../work/cube/js/Cube.js"],"names":["Cube","center","side","d","vertices","x","y","z","faces","ctx","dx","dy","clearRect","len","length","j","face","P","project","beginPath","moveTo","k","n_vertices","lineTo","closePath","stroke","fill","vertex"],"mappings":"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","file":"Cube.js","sourcesContent":["import {Vertex} from './Vertex.js';\r\nexport class Cube {\r\n\r\n    constructor(center, side){\r\n        //中心\r\n        this.center = center;\r\n\r\n        //边长\r\n        this.side = side;\r\n\r\n        //半径\r\n        var d = side/2;\r\n\r\n        //8个点\r\n        this.vertices = [\r\n            new Vertex(center.x - d, center.y - d, center.z + d),\r\n            new Vertex(center.x - d, center.y - d, center.z - d),\r\n            new Vertex(center.x + d, center.y - d, center.z - d),\r\n            new Vertex(center.x + d, center.y - d, center.z + d),\r\n            new Vertex(center.x + d, center.y + d, center.z + d),\r\n            new Vertex(center.x + d, center.y + d, center.z - d),\r\n            new Vertex(center.x - d, center.y + d, center.z - d),\r\n            new Vertex(center.x - d, center.y + d, center.z + d)\r\n        ];\r\n\r\n        //6个面\r\n        this.faces = [\r\n            [this.vertices[0], this.vertices[1], this.vertices[2], this.vertices[3]],\r\n            [this.vertices[3], this.vertices[2], this.vertices[5], this.vertices[4]],\r\n            [this.vertices[4], this.vertices[5], this.vertices[6], this.vertices[7]],\r\n            [this.vertices[7], this.vertices[6], this.vertices[1], this.vertices[0]],\r\n            [this.vertices[7], this.vertices[0], this.vertices[3], this.vertices[4]],\r\n            [this.vertices[1], this.vertices[6], this.vertices[5], this.vertices[2]]\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * 将自己立方体渲染在canvas上(Y轴垂直于屏幕).\r\n     * @param ctx canvas对象\r\n     * @param dx canvas起点相对立方体中心的x距离\r\n     * @param dy canvas起点相对立方体中心的y距离\r\n     */\r\n    render(ctx, dx, dy){\r\n        ctx.clearRect(0, 0, 2*dx, 2*dy);\r\n        var faces = this.faces,len = this.faces.length;\r\n        //遍历6个面\r\n        for (var j = 0; j < len; ++j) {\r\n            var face = faces[j];\r\n            var P = this.project(face[0]);\r\n            ctx.beginPath();\r\n            ctx.moveTo(P.x + dx, P.y + dy);\r\n            //连接4个点\r\n            for (var k = 1, n_vertices = face.length; k < n_vertices; ++k) {\r\n                P = this.project(face[k]);\r\n                ctx.lineTo(P.x + dx, P.y + dy);\r\n            }\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n            ctx.fill();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 已Y轴为垂线将三维平面的点映射到二维平面.\r\n     * @param vertex vertex\r\n     */\r\n    project(vertex) {\r\n        return new Vertex(vertex.x, vertex.z);\r\n    }\r\n}"]}